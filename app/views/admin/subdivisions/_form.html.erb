<%= semantic_nested_form_for @subdivision, :url => @subdivision.new_record? ? collection_path : resource_path do |form| %>
  <%= form.inputs do %>
    <%= form.input :title %>
    <%= form.input :abbr %>
    <%= form.input :url, :as => :string %>
  <% end %>
  <% @subdivision.build_building unless @subdivision.building %>
  <%= form.inputs :for => :building do | building_form | %>
    <%= building_form.input :postcode %>
    <%= building_form.input :region %>
    <%= building_form.input :district %>
    <%= building_form.input :locality %>
    <%= building_form.input :street %>
    <%= building_form.input :house %>
    <%= building_form.input :building %>
  <% end %>

  <% form.fields_for :phones do |phone_form| %>
    <%= phone_form.inputs do %>
      <%= phone_form.input :code %>
      <%= phone_form.input :number %>
      <%= phone_form.input :kind, :as => :select, :collection => Phone.values_for_select_tag(:kind) %>
      <%= phone_form.link_to_remove t('active_admin.delete_phone'), :class => 'button icon trash danger' %>
    <% end %>
  <% end %>
  <div class="phones_fieldset">
    <%= form.link_to_add t('active_admin.new_phone'), :phones, :class => 'button icon add' %>
  </div>

  <%= form.buttons do %>
    <%= form.commit_button %>
    <li class='cancel'>
      <%= link_to t("active_admin.cancel"), @subdivision.new_record? ? collection_path : resource_path %>
    </li>
  <% end %>
<% end %>
