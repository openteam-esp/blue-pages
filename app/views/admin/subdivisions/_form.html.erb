<%= semantic_form_for [:admin, @subdivision] do |form| %>
  <%= form.inputs do %>
    <%= form.input :title %>
    <%= form.input :abbr %>
    <%= form.input :parent_id, :input_html => { :value => params[:parent_id] }, :as => :hidden if params[:parent_id] %>
  <% end %>
  <% @subdivision.build_building unless @subdivision.building %>
  <%= form.inputs :for => :building do | building_form | %>
    <%= building_form.input :postcode %>
    <%= building_form.input :region %>
    <%= building_form.input :district %>
    <%= building_form.input :locality %>
    <%= building_form.input :street %>
    <%= building_form.input :house %>
    <%= building_form.input :building %>
  <% end %>
  <% @subdivision.phones.build %>
  <%= form.inputs :for => :phones do | phone_form | %>
    <%= phone_form.input :code %>
    <%= phone_form.input :number %>
    <%= phone_form.input :kind, :as => :select, :collection => Phone.values_for_select_tag(:kind) %>
    <%= phone_form.input :_destroy, :as => :boolean if phone_form.object.persisted? %>
  <% end %>
  <%= form.buttons %>
<% end %>
